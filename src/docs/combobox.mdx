# Combobox

The Combobox component combines an input with a dropdown menu, allowing users to filter and select from a list of options.

## Features

- Autocomplete functionality
- Keyboard navigation support
- Customizable dropdown appearance
- Accessible by default
- Filterable options

## Installation

```jsx
import { Combobox } from 'shadcn-design-system';
```

## Usage

```jsx
import { useState } from 'react';
import { 
  Popover,
  PopoverContent,
  PopoverTrigger,
  Command,
  CommandEmpty,
  CommandGroup,
  CommandInput,
  CommandItem,
  Button
} from 'shadcn-design-system';
import { Check, ChevronsUpDown } from 'lucide-react';
import { cn } from 'shadcn-design-system';

const frameworks = [
  { value: 'react', label: 'React' },
  { value: 'vue', label: 'Vue' },
  { value: 'angular', label: 'Angular' },
  { value: 'svelte', label: 'Svelte' },
  { value: 'solid', label: 'Solid' },
];

export function ComboboxDemo() {
  const [open, setOpen] = useState(false);
  const [value, setValue] = useState('');

  return (
    <Popover open={open} onOpenChange={setOpen}>
      <PopoverTrigger asChild>
        <Button
          variant="outline"
          role="combobox"
          aria-expanded={open}
          className="w-[200px] justify-between"
        >
          {value
            ? frameworks.find((framework) => framework.value === value)?.label
            : "Select framework..."}
          <ChevronsUpDown className="ml-2 h-4 w-4 shrink-0 opacity-50" />
        </Button>
      </PopoverTrigger>
      <PopoverContent className="w-[200px] p-0">
        <Command>
          <CommandInput placeholder="Search framework..." />
          <CommandEmpty>No framework found.</CommandEmpty>
          <CommandGroup>
            {frameworks.map((framework) => (
              <CommandItem
                key={framework.value}
                value={framework.value}
                onSelect={(currentValue) => {
                  setValue(currentValue === value ? '' : currentValue);
                  setOpen(false);
                }}
              >
                <Check
                  className={cn(
                    "mr-2 h-4 w-4",
                    value === framework.value ? "opacity-100" : "opacity-0"
                  )}
                />
                {framework.label}
              </CommandItem>
            ))}
          </CommandGroup>
        </Command>
      </PopoverContent>
    </Popover>
  );
}
```

## Props

### Popover Props

| Prop | Type | Default | Description |
| ---- | ---- | ------- | ----------- |
| open | boolean | - | Whether the popover is open |
| onOpenChange | function | - | Callback when open state changes |

### Command Props

| Prop | Type | Default | Description |
| ---- | ---- | ------- | ----------- |
| className | string | - | Additional CSS classes |
| children | ReactNode | - | Command components |

### CommandInput Props

| Prop | Type | Default | Description |
| ---- | ---- | ------- | ----------- |
| placeholder | string | - | Input placeholder text |
| className | string | - | Additional CSS classes |

### CommandItem Props

| Prop | Type | Default | Description |
| ---- | ---- | ------- | ----------- |
| value | string | - | Item value |
| onSelect | function | - | Callback when item is selected |
| className | string | - | Additional CSS classes |
| disabled | boolean | false | Whether the item is disabled |

## Examples

### Basic Combobox

```jsx
import { useState } from 'react';
import { 
  Popover,
  PopoverContent,
  PopoverTrigger,
  Command,
  CommandEmpty,
  CommandGroup,
  CommandInput,
  CommandItem,
  Button
} from 'shadcn-design-system';
import { Check, ChevronsUpDown } from 'lucide-react';
import { cn } from 'shadcn-design-system';

const items = [
  { value: 'apple', label: 'Apple' },
  { value: 'banana', label: 'Banana' },
  { value: 'orange', label: 'Orange' },
  { value: 'grape', label: 'Grape' },
  { value: 'pear', label: 'Pear' },
];

export function FruitCombobox() {
  const [open, setOpen] = useState(false);
  const [value, setValue] = useState('');

  return (
    <Popover open={open} onOpenChange={setOpen}>
      <PopoverTrigger asChild>
        <Button
          variant="outline"
          role="combobox"
          aria-expanded={open}
          className="w-[200px] justify-between"
        >
          {value
            ? items.find((item) => item.value === value)?.label
            : "Select fruit..."}
          <ChevronsUpDown className="ml-2 h-4 w-4 shrink-0 opacity-50" />
        </Button>
      </PopoverTrigger>
      <PopoverContent className="w-[200px] p-0">
        <Command>
          <CommandInput placeholder="Search fruit..." />
          <CommandEmpty>No fruit found.</CommandEmpty>
          <CommandGroup>
            {items.map((item) => (
              <CommandItem
                key={item.value}
                value={item.value}
                onSelect={(currentValue) => {
                  setValue(currentValue === value ? '' : currentValue);
                  setOpen(false);
                }}
              >
                <Check
                  className={cn(
                    "mr-2 h-4 w-4",
                    value === item.value ? "opacity-100" : "opacity-0"
                  )}
                />
                {item.label}
              </CommandItem>
            ))}
          </CommandGroup>
        </Command>
      </PopoverContent>
    </Popover>
  );
}
```

### With Form Integration

```jsx
import { useState } from 'react';
import { useForm, Controller } from 'react-hook-form';
import { 
  Popover,
  PopoverContent,
  PopoverTrigger,
  Command,
  CommandEmpty,
  CommandGroup,
  CommandInput,
  CommandItem,
  Button,
  Form,
  FormControl,
  FormDescription,
  FormField,
  FormItem,
  FormLabel,
  FormMessage
} from 'shadcn-design-system';
import { Check, ChevronsUpDown } from 'lucide-react';
import { cn } from 'shadcn-design-system';

const languages = [
  { value: 'en', label: 'English' },
  { value: 'fr', label: 'French' },
  { value: 'de', label: 'German' },
  { value: 'es', label: 'Spanish' },
  { value: 'pt', label: 'Portuguese' },
];

export function FormCombobox() {
  const form = useForm({
    defaultValues: {
      language: '',
    },
  });

  function onSubmit(data) {
    console.log(data);
  }

  return (
    <Form {...form}>
      <form onSubmit={form.handleSubmit(onSubmit)} className="space-y-6">
        <FormField
          control={form.control}
          name="language"
          render={({ field }) => (
            <FormItem className="flex flex-col">
              <FormLabel>Language</FormLabel>
              <Popover>
                <PopoverTrigger asChild>
                  <FormControl>
                    <Button
                      variant="outline"
                      role="combobox"
                      className="w-[200px] justify-between"
                    >
                      {field.value
                        ? languages.find(
                            (language) => language.value === field.value
                          )?.label
                        : "Select language..."}
                      <ChevronsUpDown className="ml-2 h-4 w-4 shrink-0 opacity-50" />
                    </Button>
                  </FormControl>
                </PopoverTrigger>
                <PopoverContent className="w-[200px] p-0">
                  <Command>
                    <CommandInput placeholder="Search language..." />
                    <CommandEmpty>No language found.</CommandEmpty>
                    <CommandGroup>
                      {languages.map((language) => (
                        <CommandItem
                          key={language.value}
                          value={language.value}
                          onSelect={(value) => {
                            form.setValue("language", value);
                          }}
                        >
                          <Check
                            className={cn(
                              "mr-2 h-4 w-4",
                              language.value === field.value
                                ? "opacity-100"
                                : "opacity-0"
                            )}
                          />
                          {language.label}
                        </CommandItem>
                      ))}
                    </CommandGroup>
                  </Command>
                </PopoverContent>
              </Popover>
              <FormDescription>
                Select your preferred language.
              </FormDescription>
              <FormMessage />
            </FormItem>
          )}
        />
        <Button type="submit">Submit</Button>
      </form>
    </Form>
  );
}
```

## Accessibility

- Keyboard navigation support (arrow keys, Enter, Escape)
- ARIA attributes for screen readers
- Focus management
- Proper labeling

## Customization

The Combobox can be customized using Tailwind CSS classes:

```jsx
<Popover>
  <PopoverTrigger asChild>
    <Button
      variant="outline"
      className="w-[250px] border-2 border-purple-500 hover:border-purple-700"
    >
      {/* Button content */}
    </Button>
  </PopoverTrigger>
  <PopoverContent className="w-[250px] bg-purple-50 border-purple-200">
    <Command className="rounded-lg">
      {/* Command content */}
    </Command>
  </PopoverContent>
</Popover>
```

## Advanced Usage

### Multi-select Combobox

```jsx
import { useState } from 'react';
import { 
  Popover,
  PopoverContent,
  PopoverTrigger,
  Command,
  CommandEmpty,
  CommandGroup,
  CommandInput,
  CommandItem,
  Button,
  Badge
} from 'shadcn-design-system';
import { Check, ChevronsUpDown, X } from 'lucide-react';
import { cn } from 'shadcn-design-system';

const skills = [
  { value: 'html', label: 'HTML' },
  { value: 'css', label: 'CSS' },
  { value: 'javascript', label: 'JavaScript' },
  { value: 'react', label: 'React' },
  { value: 'vue', label: 'Vue' },
  { value: 'angular', label: 'Angular' },
  { value: 'node', label: 'Node.js' },
];

export function MultiSelectCombobox() {
  const [open, setOpen] = useState(false);
  const [selectedValues, setSelectedValues] = useState([]);

  const toggleSelection = (value) => {
    setSelectedValues((current) => 
      current.includes(value)
        ? current.filter((v) => v !== value)
        : [...current, value]
    );
  };

  const removeValue = (value) => {
    setSelectedValues((current) => 
      current.filter((v) => v !== value)
    );
  };

  return (
    <div className="space-y-4">
      <Popover open={open} onOpenChange={setOpen}>
        <PopoverTrigger asChild>
          <Button
            variant="outline"
            role="combobox"
            aria-expanded={open}
            className="w-[300px] justify-between"
          >
            Select skills...
            <ChevronsUpDown className="ml-2 h-4 w-4 shrink-0 opacity-50" />
          </Button>
        </PopoverTrigger>
        <PopoverContent className="w-[300px] p-0">
          <Command>
            <CommandInput placeholder="Search skills..." />
            <CommandEmpty>No skill found.</CommandEmpty>
            <CommandGroup>
              {skills.map((skill) => (
                <CommandItem
                  key={skill.value}
                  value={skill.value}
                  onSelect={() => toggleSelection(skill.value)}
                >
                  <Check
                    className={cn(
                      "mr-2 h-4 w-4",
                      selectedValues.includes(skill.value) ? "opacity-100" : "opacity-0"
                    )}
                  />
                  {skill.label}
                </CommandItem>
              ))}
            </CommandGroup>
          </Command>
        </PopoverContent>
      </Popover>

      <div className="flex flex-wrap gap-2">
        {selectedValues.map((value) => {
          const skill = skills.find((s) => s.value === value);
          return (
            <Badge key={value} variant="secondary" className="px-3 py-1">
              {skill?.label}
              <button
                className="ml-2 rounded-full outline-none focus:ring-2"
                onClick={() => removeValue(value)}
              >
                <X className="h-3 w-3" />
              </button>
            </Badge>
          );
        })}
      </div>
    </div>
  );
}
```