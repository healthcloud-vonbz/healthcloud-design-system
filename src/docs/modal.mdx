# Modal (Dialog)

The Modal component, implemented as a Dialog, provides a way to create accessible modal dialogs that overlay the main content.

## Features

- Focus management
- Keyboard navigation (Escape to close)
- Accessible by default
- Customizable appearance
- Backdrop overlay
- Animation support

## Installation

```jsx
import { Dialog, DialogContent, DialogDescription, DialogFooter, DialogHeader, DialogTitle, DialogTrigger } from 'shadcn-design-system';
```

## Usage

```jsx
import { Button, Dialog, DialogContent, DialogDescription, DialogFooter, DialogHeader, DialogTitle, DialogTrigger } from 'shadcn-design-system';

export function DialogDemo() {
  return (
    <Dialog>
      <DialogTrigger asChild>
        <Button variant="outline">Open Dialog</Button>
      </DialogTrigger>
      <DialogContent className="sm:max-w-[425px]">
        <DialogHeader>
          <DialogTitle>Edit profile</DialogTitle>
          <DialogDescription>
            Make changes to your profile here. Click save when you're done.
          </DialogDescription>
        </DialogHeader>
        <div className="grid gap-4 py-4">
          <div className="grid grid-cols-4 items-center gap-4">
            <Label htmlFor="name" className="text-right">
              Name
            </Label>
            <Input
              id="name"
              defaultValue="Pedro Duarte"
              className="col-span-3"
            />
          </div>
          <div className="grid grid-cols-4 items-center gap-4">
            <Label htmlFor="username" className="text-right">
              Username
            </Label>
            <Input
              id="username"
              defaultValue="@peduarte"
              className="col-span-3"
            />
          </div>
        </div>
        <DialogFooter>
          <Button type="submit">Save changes</Button>
        </DialogFooter>
      </DialogContent>
    </Dialog>
  );
}
```

## Props

### Dialog Props

| Prop | Type | Default | Description |
| ---- | ---- | ------- | ----------- |
| open | boolean | - | Whether the dialog is open |
| onOpenChange | function | - | Callback when open state changes |
| modal | boolean | true | Whether the dialog is modal (blocks interaction with content behind) |

### DialogContent Props

| Prop | Type | Default | Description |
| ---- | ---- | ------- | ----------- |
| className | string | - | Additional CSS classes |
| children | ReactNode | - | Dialog content |
| forceMount | boolean | false | Force mounting when used with animations |

### DialogHeader Props

| Prop | Type | Default | Description |
| ---- | ---- | ------- | ----------- |
| className | string | - | Additional CSS classes |
| children | ReactNode | - | Header content |

### DialogFooter Props

| Prop | Type | Default | Description |
| ---- | ---- | ------- | ----------- |
| className | string | - | Additional CSS classes |
| children | ReactNode | - | Footer content |

### DialogTitle Props

| Prop | Type | Default | Description |
| ---- | ---- | ------- | ----------- |
| className | string | - | Additional CSS classes |
| children | ReactNode | - | Title content |

### DialogDescription Props

| Prop | Type | Default | Description |
| ---- | ---- | ------- | ----------- |
| className | string | - | Additional CSS classes |
| children | ReactNode | - | Description content |

## Examples

### Basic Dialog

```jsx
import { Button, Dialog, DialogContent, DialogDescription, DialogFooter, DialogHeader, DialogTitle, DialogTrigger } from 'shadcn-design-system';

export function BasicDialog() {
  return (
    <Dialog>
      <DialogTrigger asChild>
        <Button>Open Dialog</Button>
      </DialogTrigger>
      <DialogContent>
        <DialogHeader>
          <DialogTitle>Dialog Title</DialogTitle>
          <DialogDescription>
            This is a description of the dialog content.
          </DialogDescription>
        </DialogHeader>
        <p>Dialog content goes here.</p>
        <DialogFooter>
          <Button>Close</Button>
        </DialogFooter>
      </DialogContent>
    </Dialog>
  );
}
```

### Controlled Dialog

```jsx
import { useState } from 'react';
import { Button, Dialog, DialogContent, DialogDescription, DialogFooter, DialogHeader, DialogTitle } from 'shadcn-design-system';

export function ControlledDialog() {
  const [open, setOpen] = useState(false);

  return (
    <>
      <Button onClick={() => setOpen(true)}>Open Dialog</Button>
      <Dialog open={open} onOpenChange={setOpen}>
        <DialogContent>
          <DialogHeader>
            <DialogTitle>Controlled Dialog</DialogTitle>
            <DialogDescription>
              This dialog's state is controlled externally.
            </DialogDescription>
          </DialogHeader>
          <p>You can control this dialog programmatically.</p>
          <DialogFooter>
            <Button onClick={() => setOpen(false)}>Close</Button>
          </DialogFooter>
        </DialogContent>
      </Dialog>
    </>
  );
}
```

### Confirmation Dialog

```jsx
import { useState } from 'react';
import { Button, Dialog, DialogContent, DialogDescription, DialogFooter, DialogHeader, DialogTitle } from 'shadcn-design-system';

export function ConfirmationDialog() {
  const [open, setOpen] = useState(false);
  const [confirmed, setConfirmed] = useState(false);

  const handleConfirm = () => {
    setConfirmed(true);
    setOpen(false);
  };

  return (
    <div className="space-y-4">
      <Button onClick={() => setOpen(true)}>Delete Item</Button>
      
      {confirmed && (
        <p className="text-sm text-green-600">Item was deleted successfully!</p>
      )}
      
      <Dialog open={open} onOpenChange={setOpen}>
        <DialogContent>
          <DialogHeader>
            <DialogTitle>Confirm Deletion</DialogTitle>
            <DialogDescription>
              Are you sure you want to delete this item? This action cannot be undone.
            </DialogDescription>
          </DialogHeader>
          <DialogFooter className="flex justify-between">
            <Button variant="outline" onClick={() => setOpen(false)}>
              Cancel
            </Button>
            <Button variant="destructive" onClick={handleConfirm}>
              Delete
            </Button>
          </DialogFooter>
        </DialogContent>
      </Dialog>
    </div>
  );
}
```

### Form Dialog

```jsx
import { useState } from 'react';
import { useForm } from 'react-hook-form';
import { 
  Button, 
  Dialog, 
  DialogContent, 
  DialogDescription, 
  DialogFooter, 
  DialogHeader, 
  DialogTitle,
  DialogTrigger,
  Input,
  Label,
  Form,
  FormControl,
  FormDescription,
  FormField,
  FormItem,
  FormLabel,
  FormMessage
} from 'shadcn-design-system';
import { zodResolver } from '@hookform/resolvers/zod';
import * as z from 'zod';

const formSchema = z.object({
  name: z.string().min(2, {
    message: "Name must be at least 2 characters.",
  }),
  email: z.string().email({
    message: "Please enter a valid email.",
  }),
});

export function FormDialog() {
  const [open, setOpen] = useState(false);
  
  const form = useForm({
    resolver: zodResolver(formSchema),
    defaultValues: {
      name: "",
      email: "",
    },
  });

  function onSubmit(values) {
    console.log(values);
    setOpen(false);
    form.reset();
  }

  return (
    <Dialog open={open} onOpenChange={setOpen}>
      <DialogTrigger asChild>
        <Button>Add User</Button>
      </DialogTrigger>
      <DialogContent className="sm:max-w-[425px]">
        <DialogHeader>
          <DialogTitle>Add new user</DialogTitle>
          <DialogDescription>
            Fill in the information for the new user.
          </DialogDescription>
        </DialogHeader>
        <Form {...form}>
          <form onSubmit={form.handleSubmit(onSubmit)} className="space-y-4">
            <FormField
              control={form.control}
              name="name"
              render={({ field }) => (
                <FormItem>
                  <FormLabel>Name</FormLabel>
                  <FormControl>
                    <Input placeholder="John Doe" {...field} />
                  </FormControl>
                  <FormMessage />
                </FormItem>
              )}
            />
            <FormField
              control={form.control}
              name="email"
              render={({ field }) => (
                <FormItem>
                  <FormLabel>Email</FormLabel>
                  <FormControl>
                    <Input placeholder="john@example.com" {...field} />
                  </FormControl>
                  <FormMessage />
                </FormItem>
              )}
            />
            <DialogFooter>
              <Button type="submit">Save</Button>
            </DialogFooter>
          </form>
        </Form>
      </DialogContent>
    </Dialog>
  );
}
```

## Accessibility

- Focus is trapped inside the dialog when open
- Escape key closes the dialog
- ARIA attributes for screen readers
- Click outside to close (optional)
- Focus returns to the trigger element when closed

## Customization

The Dialog can be customized using Tailwind CSS classes:

```jsx
<Dialog>
  <DialogTrigger asChild>
    <Button className="bg-purple-600 hover:bg-purple-700">Custom Dialog</Button>
  </DialogTrigger>
  <DialogContent className="bg-purple-50 border-purple-200 rounded-xl">
    <DialogHeader className="border-b border-purple-100 pb-4">
      <DialogTitle className="text-purple-800">Custom Styled Dialog</DialogTitle>
      <DialogDescription className="text-purple-600">
        This dialog has custom styling applied.
      </DialogDescription>
    </DialogHeader>
    <div className="py-6">Content goes here</div>
    <DialogFooter className="border-t border-purple-100 pt-4">
      <Button className="bg-purple-600 hover:bg-purple-700">Close</Button>
    </DialogFooter>
  </DialogContent>
</Dialog>
```

## Advanced Usage

### Dialog with Animation

```jsx
import { useState } from 'react';
import { Button, Dialog, DialogContent, DialogDescription, DialogFooter, DialogHeader, DialogTitle, DialogTrigger } from 'shadcn-design-system';
import { AnimatePresence, motion } from 'framer-motion';

export function AnimatedDialog() {
  const [open, setOpen] = useState(false);

  return (
    <Dialog open={open} onOpenChange={setOpen}>
      <DialogTrigger asChild>
        <Button>Open Animated Dialog</Button>
      </DialogTrigger>
      <AnimatePresence>
        {open && (
          <DialogContent forceMount asChild>
            <motion.div
              initial={{ opacity: 0, scale: 0.95 }}
              animate={{ opacity: 1, scale: 1 }}
              exit={{ opacity: 0, scale: 0.95 }}
              transition={{ duration: 0.2 }}
            >
              <DialogHeader>
                <DialogTitle>Animated Dialog</DialogTitle>
                <DialogDescription>
                  This dialog animates when opening and closing.
                </DialogDescription>
              </DialogHeader>
              <p className="py-4">Dialog content goes here.</p>
              <DialogFooter>
                <Button onClick={() => setOpen(false)}>Close</Button>
              </DialogFooter>
            </motion.div>
          </DialogContent>
        )}
      </AnimatePresence>
    </Dialog>
  );
}
```

### Multi-step Dialog

```jsx
import { useState } from 'react';
import { Button, Dialog, DialogContent, DialogDescription, DialogFooter, DialogHeader, DialogTitle, DialogTrigger } from 'shadcn-design-system';

export function MultiStepDialog() {
  const [open, setOpen] = useState(false);
  const [step, setStep] = useState(1);
  const totalSteps = 3;

  const nextStep = () => {
    if (step < totalSteps) {
      setStep(step + 1);
    } else {
      setOpen(false);
      // Reset after closing
      setTimeout(() => setStep(1), 300);
    }
  };

  const prevStep = () => {
    if (step > 1) {
      setStep(step - 1);
    }
  };

  return (
    <Dialog open={open} onOpenChange={(newOpen) => {
      setOpen(newOpen);
      if (!newOpen) {
        // Reset after closing
        setTimeout(() => setStep(1), 300);
      }
    }}>
      <DialogTrigger asChild>
        <Button>Open Multi-step Dialog</Button>
      </DialogTrigger>
      <DialogContent>
        <DialogHeader>
          <DialogTitle>Step {step} of {totalSteps}</DialogTitle>
          <DialogDescription>
            Complete all steps to finish the process.
          </DialogDescription>
        </DialogHeader>
        
        <div className="py-4">
          {step === 1 && (
            <div className="space-y-4">
              <h3 className="text-lg font-medium">Personal Information</h3>
              <p>Step 1 content goes here.</p>
            </div>
          )}
          
          {step === 2 && (
            <div className="space-y-4">
              <h3 className="text-lg font-medium">Account Details</h3>
              <p>Step 2 content goes here.</p>
            </div>
          )}
          
          {step === 3 && (
            <div className="space-y-4">
              <h3 className="text-lg font-medium">Confirmation</h3>
              <p>Step 3 content goes here.</p>
            </div>
          )}
        </div>
        
        <DialogFooter className="flex justify-between">
          {step > 1 ? (
            <Button variant="outline" onClick={prevStep}>
              Back
            </Button>
          ) : (
            <div></div>
          )}
          <Button onClick={nextStep}>
            {step === totalSteps ? "Finish" : "Next"}
          </Button>
        </DialogFooter>
      </DialogContent>
    </Dialog>
  );
}
```